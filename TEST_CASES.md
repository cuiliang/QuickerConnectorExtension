# Quicker Connector 测试用例

本文档列出了 Quicker Connector 扩展需要测试的功能点，可作为测试用例进行对照。

## 1. 安装与更新

-   [ ] 首次从 Chrome 应用商店安装扩展。
-   [ ] 首次从 Edge Add-ons 安装扩展。
-   [ ] 从 getquicker.net 下载并安装 Firefox 扩展。
-   [ ] 扩展能够自动更新到新版本（Chrome）。
-   [ ] 扩展能够自动更新到新版本（Edge）。
-   [ ] 手动更新 Firefox 扩展。
-   [ ] 卸载扩展（Chrome）。
-   [ ] 卸载扩展（Edge）。
-   [ ] 卸载扩展（Firefox）。

## 2. 核心连接功能

-   [ ] 启动浏览器后，扩展能自动启动并尝试连接 Quicker。
-   [ ] 扩展能成功连接到正在运行的 Quicker 实例。
-   [ ] Quicker 未运行时，扩展的状态显示（如图标、Popup 提示）。
-   [ ] Quicker 启动后，扩展能自动或手动重新连接。
-   [ ] Quicker 关闭后，扩展的状态显示和处理。
-   [ ] 在多种网络环境下（如代理、防火墙部分限制）测试连接稳定性。

## 3. 浏览器兼容性

-   [ ] **Chrome:**
    -   [ ] 基本连接功能正常。
    -   [ ] 右键菜单功能正常。
    -   [ ] Popup 窗口显示正常。
    -   [ ] 后台脚本执行正常。
    -   [ ] 内容脚本注入和交互正常。
-   [ ] **Edge:**
    -   [ ] 基本连接功能正常。
    -   [ ] 右键菜单功能正常。
    -   [ ] Popup 窗口显示正常。
    -   [ ] 后台脚本执行正常。
    -   [ ] 内容脚本注入和交互正常。
-   [ ] **Firefox:**
    -   [ ] 基本连接功能正常。
    -   [ ] 右键菜单功能正常。
    -   [ ] Popup 窗口显示正常。
    -   [ ] 后台脚本执行正常。
    -   [ ] 内容脚本注入和交互正常。

## 4. 右键菜单功能 (v0.6.0+)

-   [ ] 在页面空白处右键，检查是否出现 Quicker 相关菜单项。
-   [ ] 在选中文本上右键，检查是否出现 Quicker 相关菜单项。
-   [ ] 在链接上右键，检查是否出现 Quicker 相关菜单项。
-   [ ] 在图片上右键，检查是否出现 Quicker 相关菜单项。
-   [ ] 点击右键菜单项，检查是否能正确触发 Quicker 中的动作。
-   [ ] 测试不同类型页面的右键菜单（如普通网页、PDF、特殊协议页面）。

## 5. 后台脚本执行 (v0.3.0+)

-   [ ] 从 Quicker 发送简单脚本到浏览器执行。
-   [ ] 脚本执行后，不包含 `sendReplyToQuicker` 时，扩展能自动返回成功状态给 Quicker。
-   [ ] 脚本执行后，包含 `sendReplyToQuicker(true, "success", {data:"test"}, serial)` 时，扩展能正确返回成功状态、消息、数据和序列号给 Quicker。
-   [ ] 脚本执行后，包含 `sendReplyToQuicker(false, "error", null, serial)` 时，扩展能正确返回失败状态、消息和序列号给 Quicker。
-   [ ] 测试执行包含异步操作的脚本。
-   [ ] 测试执行会产生错误的脚本，检查错误处理。

## 6. Popup 窗口 (v0.3.0+)

-   [ ] 点击浏览器工具栏的扩展图标，Popup 窗口能正常弹出。
-   [ ] Popup 窗口能正确显示当前连接状态。
-   [ ] Popup 窗口能正确显示当前浏览器标识（如 Chrome, Edge, Firefox）。
-   [ ] **附加权限管理:**
    -   [ ] 查看当前的附加权限列表。
    -   [ ] 请求新的附加权限（例如访问特定网站）。
    -   [ ] 撤销已授予的附加权限。
    -   [ ] 测试请求权限被用户拒绝的情况。
    -   [ ] 测试请求权限被用户同意的情况。

## 7. 内容脚本交互

-   [ ] 测试扩展是否能在目标网页上正确注入内容脚本。
-   [ ] 测试内容脚本与页面元素的交互（如读取/修改 DOM）。
-   [ ] 测试内容脚本与后台脚本的消息传递。
-   [ ] 测试在特殊页面（如 about:blank, chrome://, file://）内容脚本的行为。

## 8. 性能和资源占用

-   [ ] 检查扩展在空闲状态下的 CPU 和内存占用。
-   [ ] 检查扩展在频繁通信状态下的 CPU 和内存占用。
-   [ ] 检查扩展在执行复杂脚本时的 CPU 和内存占用。
-   [ ] 长时间运行后检查是否存在内存泄漏。

## 9. 错误处理和稳定性

-   [ ] 测试 Quicker 连接中断或异常时的处理机制。
-   [ ] 测试网络不稳定时的重连逻辑。
-   [ ] 测试向扩展发送无效或格式错误的消息时的处理。
-   [ ] 尝试触发扩展内部可能出现的错误，检查是否有合适的错误提示或恢复机制。 